<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="/scripts/jquery.js"></script>
    <!---//////////////////////////------jquery------/////////////////////////--->

    <script src="https://www.gstatic.com/firebasejs/8.8.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.8.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.8.1/firebase-analytics.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.8.1/firebase-database.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@10.16.7/dist/sweetalert2.all.min.js"></script>
    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>

    <script src="/scripts/firebase.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>
    <script>
        var SUPABASE_URL = 'https://srdaietqaprjhpuwovbv.supabase.co';
        var SUPABASE_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJyb2xlIjoiYW5vbiIsImlhdCI6MTYyNDgwOTQxMiwiZXhwIjoxOTQwMzg1NDEyfQ.yBwqUvBsIY3pbITcKgZ99jlEnVfDOhJDOQ6-hHKdaqY';

        var supabase = supabase.createClient(SUPABASE_URL, SUPABASE_KEY)
    </script>


    <script>
        $.ajax({
            url: '/index.html?clear-231',
            success: function(data) {
                var body = data.substring(data.indexOf("<style ux>") + 10, data.indexOf("</style>"));
                $('style[ux]').html(body)
            }
        });

        function a(inn, id, clas) {
            if (inn, id) {
                aa = $(`<${inn}   ${id} class="m${clas}"></${inn}>`);
            } else if (inn) {
                aa = $(`<${inn}></${inn}>`);
            }
            return aa
        };

        function srcx(inn, id, clas, src) {
            if (inn, id) {
                aa = $(`<${inn}  ${id} src="${src}" class="m${clas}">`);
            }
            return aa
        };

        function sh(dsfvf) {
            $(dsfvf).css({
                'height': $(dsfvf).width() + 'px'
            })
            $(window).on('resize', function() {
                $(dsfvf).css({
                    'height': $(dsfvf).width() + 'px'
                })
            })
        }

        function sw(dsfvf) {
            $(dsfvf).css({
                'width': $(dsfvf).height() + 'px'
            })
            $(window).on('resize', function() {
                $(dsfvf).css({
                    'width': $(dsfvf).height() + 'px'
                })
            })
        }
    </script>
    <style ux>

    </style>
    <style mi>
        .m1 {
            display: grid;
            grid-gap: 10px;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
        }
        
        input {
            padding: 0.7rem 1rem;
            height: 2.5rem;
            background: var(--r10);
            color: white;
            font-size: 1.5rem;
            border-radius: 5px;
        }
        
        formx {
            padding: 1.3rem 1rem;
            gap: 0.5rem;
            align-items: flex-start!important;
            width: -webkit-fill-available;
        }
        
        button {
            padding: 1rem 1.2rem;
            background: var(--r10);
            color: white;
            font-size: 1.1rem;
            border-radius: 5px;
            border: none;
            font-family: 'C1';
            width: -webkit-fill-available;
        }
    </style>
</head>

<body>


    <script>
        // sh('class')
        // a('div','id','class')
        // srcx('img','id','class','src') 
        // .css('','')
        $(document).on('click', '[registerbtn]', function name(params) {
            const email = $('#loginemail').val();
            const password = $('#loginpassword').val();
            if (email) {
                if (password) {
                    firebase.auth().createUserWithEmailAndPassword(email, password)
                        .then((userCredential) => {
                            // Signed in 
                            var user = userCredential.user;
                            // ...
                        })
                        .catch((error) => {
                            var errorCode = error.code;
                            var errorMessage = error.message;
                            swal('', errorMessage)
                        });
                }
            }

        })
        $(document).on('click', '[loginbtn]', function name(params) {
            const email = $('#loginemail').val();
            const password = $('#loginpassword').val();
            if (email) {
                if (password) {
                    firebase.auth().signInWithEmailAndPassword(email, password)
                        .then((userCredential) => {
                            // Signed in 
                            var user = userCredential.user;
                            // ...
                        })
                        .catch((error) => {
                            var errorCode = error.code;
                            var errorMessage = error.message;
                            swal('', errorMessage)
                                // ..
                        });
                }
            }

        })

        firebase.auth().onAuthStateChanged(function(user) {
            if (user) {
                // User is signed in.
                console.log(user.uid)
                const data = firebase.database().ref('/users/' + user.uid);
                data.update({
                    State: true,
                });
                data.onDisconnect().update({
                    State: false,
                });
                data.once("value", snapshot => {

                    if (typeof snapshot.val().displayName == "undefined") {
                        async function myFunction() {
                            const {
                                value: text
                            } = await Swal.fire({
                                title: 'Input DisplayName address',
                                input: 'text',
                                inputLabel: 'Your DisplayName address',
                                inputPlaceholder: 'Enter your DisplayName address'
                            })

                            if (text) {
                                data.update({
                                    displayName: text,
                                });
                            }
                        }
                        myFunction()
                    } else {
                        console.log(snapshot.val())
                    }
                })
                $('.m31').remove()
            } else {
                // User is signed out.
                console.log('No')
                setTimeout(
                    function name(params) {
                        $('.m3').prepend(a('div', 'fw ff aa fbg', '31')
                            .css('background', 'var(--r5)')
                            .css('justify-content', 'flex-end')
                            .prepend(
                                a('formx', 'ff', '311').prepend(
                                    `<input type="email" ff fw  name="" autocomplete="email" id="loginemail">
        <input  type="password" ff fw  name="" autocomplete="new-password" id="loginpassword">
        <button loginbtn style="background-color:var(--c7);" type="submit">Login</button>
        <button registerbtn style="background-color:rgb(88, 101, 242);" type="submit">Register</button>`
                                )
                            ))
                    }, 1000)
            }
        });
        $('body').prepend(
                a('div', 'fw ff fbg', '3')
                .prepend(

                    ''

                )
                .css('position', 'fixed')
                .css('bottom', '0')
                .css('overflow', 'hidden')
                .css('z-index', '3')
                .css('left', '0'),
                ///Bottom Bar///
                a('div', 'fw ff', '2').prepend(
                    ''
                )
                .css('position', 'fixed')
                .css('bottom', '0')
                .css('left', '0')
                .css('height', '30px')
                .css('padding', '10px 20px')
                .css('background', 'var(--r5)')
                .css('flex-direction', 'row')
                .css('justify-content', 'space-between')
                .css('z-index', '1').ready(
                    function name(params) {
                        $('body').css('margin-bottom', '75px')
                        const data = [{
                            img: 'https://cdn.discordapp.com/attachments/399102162459688960/870645564621062184/EmojiSymbolsCategory_2acc53c1a6b1d999f2a5ca4c059d9d12_1.png',
                            name: '',
                            color: '',
                            br: '',
                        }, {
                            img: 'https://cdn.discordapp.com/attachments/399102162459688960/870645884076052530/Search_f1f1aa5058bd080628dda43c042a9aba.png',
                            name: '',
                            color: '',
                            br: '',
                        }, {
                            img: 'https://cdn.discordapp.com/attachments/399102162459688960/870645552629551164/PlusCircle_31499eef2b3ba2b92003ae6d0ec838a1.png',
                            name: '',
                            color: '',
                            br: '',
                        }, {
                            img: 'https://cdn.discordapp.com/attachments/399102162459688960/870645575891173446/Bell_3d990f6114a0fd6f02165f5c7a05c77f.png',
                            name: '',
                            color: '',
                            br: '',
                        }, {
                            img: '',
                            name: '',
                            color: 'rgb(88, 101, 242)',
                            br: '100rem',
                        }]
                        $.each(data, function(v, o) {
                            const data = a('div', 'fw fbg ff', '21')
                                .prepend(
                                    ''
                                )
                                .css('background-color', o.color)
                                .css('border-radius', o.br)
                                .css('width', '30px')
                                .css('background-image', 'url(' + o.img + ')')
                            $('.m2').append(data)
                        })
                    }
                ),
                ///Bottom Bar///
                a('div', 'rr fw', '1').css('margin', '15px').prepend(
                    ''

                ).ready(function() {
                    $.getJSON('https://pfps.glitch.me/?p=0', function(api) {

                        $.each(api, function(o, v) {
                            $.each(v, function(o, v) {

                                if (v.img) {
                                    $('.m1').prepend(
                                        a('div', 'ff rr fw', '11 m12x').prepend(
                                            srcx('img', 'ff nnn', 'idd', v.img),
                                            a('div', 'ff aa fw fbg ', '12x m111')
                                            .css('padding', '100px')

                                            .css('top', '-50%')
                                            .css('left', '-50%')
                                            .css('filter', 'blur(30px)')
                                            .css('background-image', 'url(' + v.img + ')'),
                                            a('div', 'ff rr fw fbg ', '112')
                                            .css('background-image', 'url(' + v.img + ')')
                                            .css('margin', '30px')
                                            .css('border-radius', '100rem'),
                                        )
                                        .css('overflow', 'hidden')
                                        .css('background-color', 'var(--r11)')
                                        .css('border-radius', '5px').ready(function() {
                                            sh('.m12x')
                                            sw('.m111')

                                        })
                                    )
                                } else {

                                }


                            })
                        })
                    })
                })

            )
            .css('background-color', 'var(--r7)')
    </script>
</body>

</html>